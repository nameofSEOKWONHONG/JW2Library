@using TodoBlazor.TodoList

<MudDrawerHeader>
    <h1>일정관리</h1>
</MudDrawerHeader>
<MudGrid>
    <MudItem xs="12">
        <MudGrid Spacing="2" Justify="Justify.Center">
            <MudItem>
                <MudPaper Style="height:auto;width:auto">
                    <TodoInsert OnSubmitCallback="@OnAdd"></TodoInsert>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudItem>
</MudGrid>
<MudGrid Style="padding: 30px;">
    <MudItem xs="12">
        <MudGrid Spacing="2" Justify="Justify.Center">
            <MudItem>
                <MudPaper Style="height:auto;width:auto">
                    <TodoBlazor.Components.TodoList TodoItems="@TodoItems"></TodoBlazor.Components.TodoList>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudItem>
</MudGrid>

@code {
  public List<TodoItem> TodoItems = new List<TodoItem>() {
    new TodoItem() {Id = 1, Text = "test1", IsDone = false, IsToggle = false},
    new TodoItem() {Id = 2, Text = "test2", IsDone = false, IsToggle = false},
    new TodoItem() {Id = 3, Text = "test3", IsDone = false, IsToggle = false},
    new TodoItem() {Id = 4, Text = "test4", IsDone = false, IsToggle = false},
    new TodoItem() {Id = 5, Text = "test5", IsDone = false, IsToggle = false},
    new TodoItem() {Id = 6, Text = "test6", IsDone = false, IsToggle = false},
  };

  public void OnAdd(TodoItem todo) {
      if(TodoItems.xCount() <= 0) {
          todo.Id = 1;
      }
      else {
          todo.Id = TodoItems.Max(m => m.Id) + 1;      
      }
      TodoItems.Add(todo);
  }
}